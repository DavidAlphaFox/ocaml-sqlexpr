
.SCANNER: scan-ocaml-%.ml: %.ml $(ROOT)/src/syntax/pa_sql.cmo
.SCANNER: scan-ocaml-%.mli: %.mli $(ROOT)/src/syntax/pa_sql.cmo

OCAMLFINDFLAGS += -syntax camlp4o -ppopt $(ROOT)/src/syntax/pa_sql.cmo

section
    OCAMLPACKS[] += oUnit
    OCAMLINCLUDES += $(ROOT)/src
    OCAML_LIBS[] += $(ROOT)/src/sqlexpr
    OCamlProgram(t_sqlexpr_sqlite, t_sqlexpr_sqlite)
    OCamlProgram(bm_sqlexpr_sqlite_lwt, bm_sqlexpr_sqlite_lwt)
    $(addsuffixes .o .cmx .cmi .cmo, bm_sqlexpr_sqlite_lwt t_sqlexpr_sqlite):

.PHONY: test
test: t_sqlexpr_sqlite
    ./t_sqlexpr_sqlite
